<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mini Project 23</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }
      body {
        height: 100vh;
        display: grid;
        place-content: center;
      }
      .radio-group {
        display: flex;
        gap: 1rem;
      }

      table {
        width: fit-content;
      }
      #table {
        width: 80vw;
      }
      .delete {
        background-color: rgb(255, 142, 142);
      }
      .edit {
        background-color: rgb(247, 255, 172);
      }
      button {
        border: none;
        padding: 0.25rem;
        border-radius: 2px;
        margin-right: 0.25rem;
      }
    </style>
  </head>
  <body>
    <table>
      <tr>
        <td><label for="name">Nama Buah</label></td>
        <td><input type="text" name="name" id="name" /></td>
      </tr>
      <tr>
        <td><label for="weight">Berat</label></td>
        <td><input type="number" name="weight" id="weight" /></td>
        <td>Kg</td>
      </tr>
      <tr>
        <td><label for="image">Gambar</label></td>
        <td><input type="url" name="image" id="image" /></td>
      </tr>
      <tr>
        <td></td>
        <td>
          <button onclick="handleSave()" style="background-color: aquamarine">
            Tambah
          </button>
        </td>
      </tr>
    </table>
    <br />
    <hr />
    <br />
    <table border="1" id="table">
      <thead align="center">
        <td>ID</td>
        <td>Nama Buah</td>
        <td>Berat</td>
        <td>Gambar</td>
        <td>Aksi</td>
      </thead>
      <tbody align="center"></tbody>
    </table>
    <script>
      let i = 1;
      function handleSave() {
        const name = document.querySelector("#name");
        const weight = document.querySelector("#weight");
        const image = document.querySelector("#image");
        const table = document.querySelector("#table tbody");

        const tr = document.createElement("tr");
        const idCol = document.createElement("td");
        const nameCol = document.createElement("td");
        const weightCol = document.createElement("td");
        const imageCol = document.createElement("td");
        const buttonCol = document.createElement("td");

        const theImage = document.createElement("img");

        const deleteButton = document.createElement("button");
        const editButton = document.createElement("button");

        const nameForm = document.createElement("input");
        const weightForm = document.createElement("input");
        const imageForm = document.createElement("input");

        nameForm.type = "text";
        weightForm.type = "number";
        imageForm.type = "url";

        theImage.src = image.value;

        deleteButton.textContent = "Hapus";
        deleteButton.onclick = (e) => {
          table.removeChild(tr);
        };
        deleteButton.classList = "delete";

        editButton.textContent = "Edit";
        editButton.classList = "edit";
        editButton.onclick = (e) => {
          if (e.target.textContent == "Edit") {
            e.target.textContent = "Save";

            nameForm.value = nameCol.textContent;
            weightForm.value = parseInt(weightCol.textContent);
            imageForm.value = theImage.src;

            nameCol.innerHTML = "";
            weightCol.innerHTML = "";
            imageCol.innerHTML = "";

            nameCol.appendChild(nameForm);
            weightCol.appendChild(weightForm);
            imageCol.appendChild(imageForm);
          } else {
            e.target.textContent = "Edit";

            theImage.src = imageForm.value;

            nameCol.innerHTML = nameForm.value;
            weightCol.innerHTML = weightForm.value + "kg";
            imageCol.innerHTML = "";
            imageCol.appendChild(theImage);
          }
        };

        if (weight.value > 5) weightCol.style.backgroundColor = "red";

        idCol.textContent = i++;
        nameCol.textContent = name.value;
        weightCol.textContent = weight.value + "kg";

        imageCol.appendChild(theImage);

        buttonCol.appendChild(deleteButton);
        buttonCol.appendChild(editButton);
        tr.appendChild(idCol);
        tr.appendChild(nameCol);
        tr.appendChild(weightCol);
        tr.appendChild(imageCol);
        tr.appendChild(buttonCol);
        table.appendChild(tr);
      }
    </script>
  </body>
</html>
